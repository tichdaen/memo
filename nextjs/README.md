# Next js

## 폰트와 이미지 적용

> Font
  
`next/font` 를 사용 

Next는 빌드시 글꼴파일을 다운로드 및 다른 정적 애셋과 함께 호스팅하여 추가적인 네트워크 요청이 없도록 한다

> Image


단순 이미지 태그를 사용해도 되지만, 그러면 다음을 수동으로 수행해야한다.
- 이미지가 다양한 화면 크기에 반응적으로 표시되도록 보장합니다.
- 다양한 기기에대한 이미지 크기를 지정
- 이미지가 로드됨에 따라 레이아웃 시프트를 방지
- 뷰포트 외부에 있는 이미지를 지연로드

## Data Fetching 방식

### API layer

- API 를 제공하는 타 서버를 사용하는 경우
- 클라이언트에서 데이터를 가져오는 경우. 데이터베이스 비밀 키를 노출하지 않기 위해 서버에서 작동하는 API Layer를 거쳐야함

### Server Component ( React Server Component aka. RSC ) 사용

> 기본적으로 Next는 RSC 를 사용하는데, 몇몇 이점이 있다.

- 서버컴포넌트는 데이터조회와같은 비동기작업을 처리하기위한 프로미스를 지원하는 등 간단한 솔루션을 제공한다.
  - `useEffect`, `useState`를 사용하지 않아도 된다.
- RSC는 서버에서 실행되기 때문에 오직 결과만 클라이언트에게 제공한다.


> 일반적으로는 `page.tsx` 에서 상단에 `await fetchingData()` 로 데이터를 조회할 수 있지만, 이럴경우 두가지의 문제가 생긴다.

1. 데이터요청이 의도치않게 서로를 막아, waterfall 발생
1. Next 는 기본적으로 성능상 이점을 위해 라우트를 프리렌더링 하는데, 이걸 스태틱 렌더링이라 부르며, 이때문에 데이터가 변경되어도 화면에 적용되지 않을 수 있다.
-> 절대 안돼!

- waterfall 같은 경우에는 아이디 정보를 얻고 아이디를 인자로 다른 API 를 호출 할 수도 있으니 나쁘지는 않다.

### Partial Prerendering

> Experimental Feature At Next 14

### Adding Search And Pagination

#### URL Search Params 를 사용하는 이유

- 북마크 및 공유 가능한 URL
  - 검색 매개변수가 URL에 포함되어 있기 때문에 사용자는 애플리케이션의 현재 상태를 북마크하여 나중에 참조하거나 공유할 수 있습니다
- 서버사이드 렌더링과 초기 로드
  - URL Search Parameter 는 초기로드에 유용함
- 분석 및 추적
  - 쿼리와 필터가 추가되어있어 여러가지 행위에 유용

### Mutating Data




